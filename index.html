<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Group Project | Expense Tracker</title> 
  <link rel="shortcut icon" href="img/logo.png" type="image/x-icon">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-50 min-h-screen p-6 flex items-center justify-center">
  <div class="bg-white rounded-2xl shadow-lg p-6 w-full max-w-lg">
    <h1 class="text-2xl font-bold text-center mb-4 text-indigo-700">ðŸ’¸ Expense Tracker</h1>

    <!-- Input Form -->
    <div class="space-y-3">
      <input id="item" type="text" placeholder="Expense name" class="w-full border rounded px-3 py-2 focus:ring focus:ring-indigo-200 outline-none">
      <input id="amount" type="number" placeholder="Amount" class="w-full border rounded px-3 py-2 focus:ring focus:ring-indigo-200 outline-none">
      <select id="category" class="w-full border rounded px-3 py-2 focus:ring focus:ring-indigo-200 outline-none">
        <option value="Food">Food</option>
        <option value="Transport">Transport</option>
        <option value="Shopping">Shopping</option>
        <option value="Utilities">Utilities</option>
        <option value="Entertainment">Entertainment</option>
        <option value="Other">Other</option>
      </select>
      <button id="add-btn" class="w-full bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700">Add Expense</button>
    </div>

    <!-- Expense List -->
    <div class="mt-6">
      <h2 class="text-lg font-semibold mb-2">Expenses</h2>
      <ul id="expense-list" class="space-y-2 text-sm text-gray-700"></ul>
    </div>

    <!-- Total -->
    <div class="mt-4 border-t pt-3 text-right">
      <span class="text-gray-500 text-sm">Total:</span>
      <span id="total" class="text-xl font-bold text-indigo-700">$0.00</span>
    </div>

    <!-- Circle Chart -->
    <div class="mt-8">
      <h2 class="text-lg font-semibold mb-3 text-center">Spending Breakdown</h2>
      <canvas id="expenseChart" width="400" height="400"></canvas>
    </div>
  </div>

  <script>
    const itemInput = document.getElementById('item');
    const amountInput = document.getElementById('amount');
    const categoryInput = document.getElementById('category');
    const addBtn = document.getElementById('add-btn');
    const list = document.getElementById('expense-list');
    const totalEl = document.getElementById('total');
    const ctx = document.getElementById('expenseChart').getContext('2d');

    let total = 0;
    let expenses = [];
    let categoryTotals = {};

    // Chart.js setup
    let expenseChart = new Chart(ctx, {
      type: 'doughnut',
      data: {
        labels: [],
        datasets: [{
          label: 'Expenses by Category',
          data: [],
          backgroundColor: ['#4f46e5','#f59e0b','#10b981','#ef4444','#6366f1','#a855f7','#f97316'],
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { position: 'bottom' }
        }
      }
    });

    function updateChart() {
      expenseChart.data.labels = Object.keys(categoryTotals);
      expenseChart.data.datasets[0].data = Object.values(categoryTotals);
      expenseChart.update();
    }

    addBtn.addEventListener('click', () => {
      const name = itemInput.value.trim();
      const amount = parseFloat(amountInput.value);
      const category = categoryInput.value;

      if (!name || isNaN(amount) || amount <= 0) {
        alert('Please enter valid name and amount.');
        return;
      }

      // Add to list
      const li = document.createElement('li');
      li.className = 'flex justify-between bg-gray-100 px-3 py-2 rounded';
      li.innerHTML = `
        <span>${name} <span class="text-gray-400 text-xs">(${category})</span></span>
        <span class="font-semibold">$${amount.toFixed(2)}</span>
      `;
      list.appendChild(li);

      // Update totals
      total += amount;
      totalEl.textContent = '$' + total.toFixed(2);

      categoryTotals[category] = (categoryTotals[category] || 0) + amount;
      updateChart();

      // Reset inputs
      itemInput.value = '';
      amountInput.value = '';
      itemInput.focus();
    });
  </script>
</body>
</html>
